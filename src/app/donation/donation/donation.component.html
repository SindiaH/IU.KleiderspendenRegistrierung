<div class="donation">
  <h1>{{'DONATION.TITLE' | translate}}</h1>
  <hr>
  <div class="description"></div>
  <form [formGroup]="donationForm" (ngSubmit)="onSubmit()" class="donation-form">
    <mat-form-field>
      <mat-label>{{'DONATION.PICKUP' | translate}}</mat-label>
      <mat-select [formControl]="deliveryType" (selectionChange)="deliveryTypeChanged()">
        <mat-option [value]="deliveryTypes.PICKUP">{{'DONATION.PICKUP' | translate}}</mat-option>
        <mat-option [value]="deliveryTypes.ONSITE">{{'DONATION.ONSITE' | translate}}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline" floatLabel="auto">
      <mat-label>{{ 'AUTH.LOGIN.EMAIL' | translate }}</mat-label>
      <input type="text" [formControl]="email" matInput required>
      <mat-error *ngIf="email.invalid">{{getErrorMessage("email") | translate}}</mat-error>
    </mat-form-field>
    <mat-form-field>
      <mat-label>{{'DONATION.CRISIS_AREA' | translate}}</mat-label>
      <mat-select [formControl]="crisisAreaId">
        <mat-option *ngFor="let crisisArea of crisisAreas" [value]="crisisArea.id">{{crisisArea.name}}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-label>{{'DONATION.DONATION_TYPE' | translate}}</mat-label>
      <mat-select [formControl]="donationTypeId">
        <mat-option *ngFor="let donationType of donationTypes"
                    [value]="donationType.id">{{donationType.name}}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field >
      <mat-label>Choose a date</mat-label>
      <input matInput [matDatepicker]="datepicker" [formControl]="pickupDate">
      <mat-datepicker-toggle matIconSuffix [for]="datepicker"></mat-datepicker-toggle>
      <mat-datepicker #datepicker >
      </mat-datepicker>
    </mat-form-field>
    <div class="pickup-address" *ngIf="deliveryType.value === deliveryTypes.PICKUP">
      <h3>{{'DONATION.PICKUP_ADDRESS' | translate}}</h3>
      <div class="street">
        <mat-form-field appearance="outline" floatLabel="auto" class="big">
          <mat-label>{{ 'DONATION.STREET' | translate }}</mat-label>
          <input type="text" [formControl]="street" matInput required>
          <mat-error *ngIf="street.invalid">{{getErrorMessage("required") | translate}}</mat-error>
        </mat-form-field>
        <div class="placeholder"></div>
        <mat-form-field appearance="outline" floatLabel="auto" class="small">
          <mat-label>{{ 'DONATION.NUMBER' | translate }}</mat-label>
          <input type="number" [formControl]="houseNumber" matInput required>
          <mat-error *ngIf="street.invalid">{{getErrorMessage("required") | translate}}</mat-error>
        </mat-form-field>
      </div>
      <div class="city">
        <mat-form-field appearance="outline" floatLabel="auto" class="small">
          <mat-label>{{ 'DONATION.ZIP' | translate }}</mat-label>
          <input type="number" [formControl]="postal" matInput required>
          <mat-error *ngIf="street.invalid">{{getErrorMessage("required") | translate}}</mat-error>
        </mat-form-field>
        <div class="placeholder"></div>
        <mat-form-field appearance="outline" floatLabel="auto" class="big">
          <mat-label>{{ 'DONATION.CITY' | translate }}</mat-label>
          <input type="text" [formControl]="location" matInput required>
          <mat-error *ngIf="street.invalid">{{getErrorMessage("required") | translate}}</mat-error>
        </mat-form-field>
      </div>
      <mat-form-field appearance="outline" floatLabel="auto">
        <mat-label>{{ 'DONATION.COUNTRY' | translate }}</mat-label>
        <input type="text" [formControl]="country" matInput required readonly>
        <mat-error *ngIf="street.invalid">{{getErrorMessage("required") | translate}}</mat-error>
      </mat-form-field>
    </div>

    <button [disabled]="loading || !this.donationForm.valid" mat-raised-button color="primary"
            type="submit">{{ loading ? ('LOADING' | translate) : ('DONATION.SUBMIT' | translate) }}</button>

  </form>
</div>
